#!/bin/sh
# DrDuck pre-push hook
# Blocks push if draft ADRs exist or if changes need ADRs

echo "ğŸ¦† DrDuck: Validating ADR requirements before push..."

# Check if DrDuck is available
if ! command -v drduck >/dev/null 2>&1; then
    echo "âš ï¸  DrDuck command not found. Install DrDuck or use --no-verify to skip."
    echo "   Install: npm install -g drduck"
    exit 1
fi

# Run pre-push validation (may block)
if ! drduck validate --pre-push; then
    echo ""
    echo "ğŸ’¡ To bypass this check: git push --no-verify"
    echo "ğŸ”— For help: drduck --help"
    exit 1
fi

# Validation passed
echo "âœ… All ADR requirements satisfied!"
exit 0
